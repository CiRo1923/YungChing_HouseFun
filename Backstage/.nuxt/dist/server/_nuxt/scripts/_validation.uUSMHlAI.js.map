{"version":3,"file":"_validation.uUSMHlAI.js","sources":["../../../../../scripts/_validation.js"],"sourcesContent":["import { unicodLength } from '@js/_prototype.js'\r\nimport { defineRule } from 'vee-validate'\r\nimport { all as rules } from '@vee-validate/rules'\r\n\r\nconst replaceMessage = (elem, object) => {\r\n  let message = object.errorMessage || object[0]\r\n\r\n  if (object.value !== null && object.value !== undefined) {\r\n    const regex = /{\\s?.*\\s?}/\r\n\r\n    message = message ? message.replace(regex, object.value) : message\r\n  } else {\r\n    const attributes = document.querySelector(`[name=\"${elem.name}\"]`).attributes\r\n\r\n    for (let i = 0; i < attributes.length; i += 1) {\r\n      const { nodeName, nodeValue } = attributes[i]\r\n      const regex = new RegExp(`{\\\\s?${nodeName}\\\\s?}`)\r\n\r\n      message = message ? message.replace(regex, nodeValue) : message\r\n    }\r\n  }\r\n\r\n  return message\r\n}\r\n\r\nObject.keys(rules).forEach((rule) => {\r\n  defineRule(rule, rules[rule])\r\n})\r\n\r\n// 必填\r\ndefineRule('required', (value, object, elem) => {\r\n  const el = document.querySelector(`[name=\"${elem.name}\"]`)\r\n\r\n  if (el.disabled) return true\r\n\r\n  const isArray = Array.isArray(object)\r\n  const hasValue = value?.length > 0\r\n  const valid = hasValue || (!isArray && !object.valid)\r\n\r\n  return !valid ? replaceMessage(elem, object) : true\r\n})\r\n\r\n// 最大字元長度\r\ndefineRule('maxlength', (value, object, elem) => {\r\n  const $elem = document.querySelector(`[name=\"${elem.name}\"]`)\r\n  const maxlength = object.value || Number($elem.getAttribute('maxlength'))\r\n\r\n  return value && unicodLength(value) > maxlength ? replaceMessage(elem, object) : true\r\n})\r\n\r\n// 最小字元長度\r\ndefineRule('minlength', (value, object, elem) => {\r\n  const $elem = document.querySelector(`[name=\"${elem.name}\"]`)\r\n  const minlength = object.value || Number($elem.getAttribute('minlength'))\r\n\r\n  return value && unicodLength(value) < minlength ? replaceMessage(elem, object) : true\r\n})\r\n\r\n// 中文格式\r\ndefineRule('chinese', (value, message) => {\r\n  return value && !/^[\\u4e00-\\u9fa5]+$/.test(value) ? message[0] : true\r\n})\r\n\r\n// 半形字元\r\ndefineRule('halfWidth', (value, object) => {\r\n  const isObject = !!object.exception\r\n  const exception = isObject ? value.replace(new RegExp(`\\\\${object.exception}`, 'g', '')) : value\r\n\r\n  return value && /[^x00-xff]/g.test(exception) ? (isObject ? object.message : object[0]) : true\r\n})\r\n\r\n// 電話格式\r\ndefineRule('phone', (value, message) => {\r\n  return value && (!/^09\\d{8}$/.test(value) || !/^0\\d{1,4}-?\\d{5,8}(#\\d+)?$/.test(value))\r\n    ? message[0]\r\n    : true\r\n})\r\n\r\n// 數字格式\r\ndefineRule('number', (value, message) => {\r\n  return value && !/^\\d+$/.test(value) ? message[0] : true\r\n})\r\n\r\n// email 格式\r\ndefineRule('email', (value, message) => {\r\n  return value && !/^\\w+((-\\w+)|(\\.\\w+))*@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z]+$/.test(value)\r\n    ? message[0]\r\n    : true\r\n})\r\n\r\n// 自定義驗證\r\ndefineRule('custom', (value, object, elem) => {\r\n  const el = document.querySelector(`[name=\"${elem.name}\"]`)\r\n\r\n  if (el.disabled) return true\r\n\r\n  const isArray = Array.isArray(object)\r\n  const hasValue = value?.length > 0\r\n  const valid = hasValue && !isArray && object.valid\r\n\r\n  return !valid ? replaceMessage(elem, object) : true\r\n})\r\n"],"names":["rules"],"mappings":"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"}